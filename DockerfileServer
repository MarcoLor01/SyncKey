FROM golang:latest

WORKDIR /SyncKey

COPY go.mod .
COPY serverOperation .
COPY serversAddrDocker.json .
RUN go get -u github.com/joho/godotenv
ARG SERVER_FILE
ENV SERVER_FILE=${SERVER_FILE}
ENV ENV_PATH=./.env
ENV SERVER_ADDR=${SERVER_ADDR}
COPY . .

EXPOSE ${SERVER_ADDR}
CMD ["sh", "-cx", "go run ${SERVER_FILE}"]
#CMD go run ${SERVER_FILE}

