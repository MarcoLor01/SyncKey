FROM golang:latest

WORKDIR /SyncKey

COPY go.mod .
COPY serversAddrDocker.json .
COPY clientCommon ./clientCommon

RUN go get -u github.com/joho/godotenv

COPY . .

# Expose port 8080 to the outside world
EXPOSE 8080
RUN go build -o clients/client ./clients/client.go
#RUN go build -o clients/consistencyTest ./clients/consistencyTest.go

# Command to run the executable
CMD ["./clients/client"]
#CMD ["./clients/consistencyTest"]